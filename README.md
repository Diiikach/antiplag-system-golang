# Антиплагиат — Микросервисная система

**Автор:** Качаев Дмитрий

---

## Используемый стек
- **Язык программирования**: Go (Golang 1.21)
- **Контейнеризация и запуск**: Docker, docker-compose
- **Базы данных**: Qdrant (векторная БД для поиска схожести работ)
- **API-интерфейсы и коммуникации**: HTTP/REST, стандартные библиотеки net/http, encoding/json
- **Тестирование и демонстрация**: curl, jq (для разбора JSON-вывода), bash-скрипты
- **Сборка и автоматизация**: Makefile (можно добавить), shell

---

## Назначение
Решение предназначено для автоматизации приёма и проверки студенческих работ на оригинальность. Архитектура построена по принципу ответственности микросервисов и рассчитана на масштабирование и простоту сопровождения.

## Архитектура
- **API Gateway (Go, 8000):** Принимает запросы, маршрутизирует между сервисами.
- **File Storing Service (Go, 8001):** Загружает и выдаёт файлы.
- **File Analysis Service (Go, 8002):** Обрабатывает файлы, выдаёт отчёты, анализирует схожесть через векторную БД.
- **Qdrant (Vector DB, 6333):** Хранит эмбеддинги работ для поиска случаев совпадений.

## Основные сценарии
- **Студент:** POST `/api/submit` (multipart: file, sender, work_id) — загружает свою работу на проверку.
- **Преподаватель:** GET `/api/works/{work_id}/reports` — получает список всех сданных работ по заданию с флагами оригинальности/плагиата.

## Алгоритм проверки
- Каждый загруженный файл преобразуется в вектор признаков.
- По вектору ищутся наиболее похожие работы того же задания других студентов.
- Если схожесть (cosine similarity) выше 0.95 — работа отмечается как плагиат.
- В отчёте видна степень совпадения и статус.

## Быстрый старт
```bash
git clone <repo_url>
cd software-design-hw3
docker compose up --build
```
Всё развёртывается автоматически: API доступен на http://localhost:8000. Примеры — в postman_collection.json.

## Демонстрационный тестовый скрипт
Для тестирования корректности воспользуйтесь:
```bash
brew install jq     # или sudo apt install jq
bash demo_scripts.sh
```
- Три работы (две идентичные, одна уникальная).
- Система проверяет и возвращает JSON-отчёт с результатами анализа.

## API Summary
- **POST** `/api/submit` — отправить работу
- **GET** `/api/works/{work_id}/reports` — получить отчёты

## Прочее
- Любые изменения сценариев — в main.go конкретного сервиса либо docker-compose.yml.
- Для базовых пояснений см. instruction.md, для быстрой проверки — demo_scripts.sh.

---
Качаев Дмитрий, 2025
